<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of makehtmldoc</title>
  <meta name="keywords" content="makehtmldoc">
  <meta name="description" content="MAKEHTMLDOC Create HTML help files from a set of M-Files">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="index.html">helper_functions</a> &gt; makehtmldoc.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for helper_functions&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>makehtmldoc
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>MAKEHTMLDOC Create HTML help files from a set of M-Files</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function makehtmldoc(filename,varargin) </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment">MAKEHTMLDOC Create HTML help files from a set of M-Files
   MAKEHTMLDOC(FILENAME) creates an html help file for each M-File
   matching FILENAME. This help file contains the header of the M-File
   (the first block of contiguous comment lines, see HELP for details),
   with links between each M-File matching FILENAME referencing each
   other.

   If no input argument specified, works with all the M-files of the
   current directory (ie, MAKEHTMLDOC('*.m')).

   MAKEHTMLDOC(FILENAME, 'Property1', 'Property2'...) where 'Property.'
   may be:

     'code'               adds a link to the source code (except for the
                          file 'Contents.m');
     'upper'              makes a link only for words in upper case.
     'quiet'              does not display informations during the
                          processing.
     'color', string      any HTML color code for the upper and lower
                          panels. Default = '#e7ebf7'.
     'title', string      title of the browser window. Default = '\f'.
     'firstline', string  text at the top of the page. Default =
                          'Contents'.
     'lastline', string   text at the bottom of the page. Default = ''.

   Note: In the string of the last three properties, '\f' will be replaced
   by the name of the current M-file. Web links may be used, e.g.
   string = '\f (&lt;a href=&quot;MyToolbox.html&quot;&gt;MyToolbox&lt;/a&gt;)'

   MAKEHTMLDOC works essentially as Matlab's DOC function, except that the
   links are only established between the set of files matching FILENAME.
   So the resulting set of HTML pages only have link between themselves,
   and will not have broken links when consulted from an external web
   site.

   Examples:
      makehtmldoc('*.m','code')  produces a set of *.html help files for
      all the *.m files of the current directory, with a link to the
      corresponding source code.

      makehtmldoc('*.m','title','\f (MyToolbox)','lastline','(c) 2006');

      makehtmldoc('*.m', ...
                  'color', '#ffff00', ...
                  'title', 'Help for \f', ...
                  'firstline', '&lt;a href=&quot;Contents.html&quot;&gt;Back&lt;/a&gt;', ...
                  'lastline', '&lt;a href=&quot;www.mytoolbox.com&quot;&gt;MyToolBox&lt;/a&gt;', ...
                  'upper', 'code');

   F. Moisy
   Revision: 1.22,  Date: 2006/10/30.

   See also HELP, DOC, WEB.</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
</ul>
<!-- crossreference -->



<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <a name="_sub0" href="#_subfunctions" class="code">function makehtmldoc(filename,varargin)</a>
0002 <span class="comment">%MAKEHTMLDOC Create HTML help files from a set of M-Files</span>
0003 <span class="comment">%   MAKEHTMLDOC(FILENAME) creates an html help file for each M-File</span>
0004 <span class="comment">%   matching FILENAME. This help file contains the header of the M-File</span>
0005 <span class="comment">%   (the first block of contiguous comment lines, see HELP for details),</span>
0006 <span class="comment">%   with links between each M-File matching FILENAME referencing each</span>
0007 <span class="comment">%   other.</span>
0008 <span class="comment">%</span>
0009 <span class="comment">%   If no input argument specified, works with all the M-files of the</span>
0010 <span class="comment">%   current directory (ie, MAKEHTMLDOC('*.m')).</span>
0011 <span class="comment">%</span>
0012 <span class="comment">%   MAKEHTMLDOC(FILENAME, 'Property1', 'Property2'...) where 'Property.'</span>
0013 <span class="comment">%   may be:</span>
0014 <span class="comment">%</span>
0015 <span class="comment">%     'code'               adds a link to the source code (except for the</span>
0016 <span class="comment">%                          file 'Contents.m');</span>
0017 <span class="comment">%     'upper'              makes a link only for words in upper case.</span>
0018 <span class="comment">%     'quiet'              does not display informations during the</span>
0019 <span class="comment">%                          processing.</span>
0020 <span class="comment">%     'color', string      any HTML color code for the upper and lower</span>
0021 <span class="comment">%                          panels. Default = '#e7ebf7'.</span>
0022 <span class="comment">%     'title', string      title of the browser window. Default = '\f'.</span>
0023 <span class="comment">%     'firstline', string  text at the top of the page. Default =</span>
0024 <span class="comment">%                          'Contents'.</span>
0025 <span class="comment">%     'lastline', string   text at the bottom of the page. Default = ''.</span>
0026 <span class="comment">%</span>
0027 <span class="comment">%   Note: In the string of the last three properties, '\f' will be replaced</span>
0028 <span class="comment">%   by the name of the current M-file. Web links may be used, e.g.</span>
0029 <span class="comment">%   string = '\f (&lt;a href=&quot;MyToolbox.html&quot;&gt;MyToolbox&lt;/a&gt;)'</span>
0030 <span class="comment">%</span>
0031 <span class="comment">%   MAKEHTMLDOC works essentially as Matlab's DOC function, except that the</span>
0032 <span class="comment">%   links are only established between the set of files matching FILENAME.</span>
0033 <span class="comment">%   So the resulting set of HTML pages only have link between themselves,</span>
0034 <span class="comment">%   and will not have broken links when consulted from an external web</span>
0035 <span class="comment">%   site.</span>
0036 <span class="comment">%</span>
0037 <span class="comment">%   Examples:</span>
0038 <span class="comment">%      makehtmldoc('*.m','code')  produces a set of *.html help files for</span>
0039 <span class="comment">%      all the *.m files of the current directory, with a link to the</span>
0040 <span class="comment">%      corresponding source code.</span>
0041 <span class="comment">%</span>
0042 <span class="comment">%      makehtmldoc('*.m','title','\f (MyToolbox)','lastline','(c) 2006');</span>
0043 <span class="comment">%</span>
0044 <span class="comment">%      makehtmldoc('*.m', ...</span>
0045 <span class="comment">%                  'color', '#ffff00', ...</span>
0046 <span class="comment">%                  'title', 'Help for \f', ...</span>
0047 <span class="comment">%                  'firstline', '&lt;a href=&quot;Contents.html&quot;&gt;Back&lt;/a&gt;', ...</span>
0048 <span class="comment">%                  'lastline', '&lt;a href=&quot;www.mytoolbox.com&quot;&gt;MyToolBox&lt;/a&gt;', ...</span>
0049 <span class="comment">%                  'upper', 'code');</span>
0050 <span class="comment">%</span>
0051 <span class="comment">%   F. Moisy</span>
0052 <span class="comment">%   Revision: 1.22,  Date: 2006/10/30.</span>
0053 <span class="comment">%</span>
0054 <span class="comment">%   See also HELP, DOC, WEB.</span>
0055 
0056 <span class="comment">% History:</span>
0057 <span class="comment">% 2005/10/18: v1.00, first version.</span>
0058 <span class="comment">% 2005/10/19: v1.02, process the 'See Also' section.</span>
0059 <span class="comment">% 2005/10/20: v1.03, option 'quiet' added.</span>
0060 <span class="comment">% 2005/10/22: v1.04, prev and next in the upper menu bar added</span>
0061 <span class="comment">% 2005/10/28: v1.05, prev and next instead of &lt; and &gt;.</span>
0062 <span class="comment">% 2005/11/01: v1.06, &lt;pre&gt; mode (keeps normal white spaces instead of &amp;nbsp;)</span>
0063 <span class="comment">% 2006/06/02: v1.10, works with varargin input arguments</span>
0064 <span class="comment">% 2006/06/16: v1.11, minor bug fixed with docstyle.css</span>
0065 <span class="comment">% 2006/07/21: v1.12, option 'lastline' added</span>
0066 <span class="comment">% 2006/09/04: v1.13, options 'title' and 'contentspage' added</span>
0067 <span class="comment">% 2006/09/06: v1.20, renamed 'makehtmldoc' (was named m2html before).</span>
0068 <span class="comment">%                    upper table modified (options 'firstline' and 'color'</span>
0069 <span class="comment">%                    added)</span>
0070 <span class="comment">% 2006/10/24: v1.21, link to contents.html only if contents.m exists</span>
0071 <span class="comment">% 2006/10/30: v1.22, process the 'Example' section.</span>
0072 
0073 
0074 <span class="keyword">if</span> nargin==0,
0075     filename=<span class="string">'*.m'</span>;
0076 <span class="keyword">end</span>;
0077 
0078 listefilename=dir(filename);
0079 listefilename={listefilename.name};
0080 
0081 <span class="keyword">if</span> ~length(listefilename)
0082     error(<span class="string">'No file match.'</span>);
0083 <span class="keyword">end</span>;
0084 
0085 <span class="comment">% iscontents is 1 if the file 'Contents.m' is present, 0 otherwise:</span>
0086 iscontents=any(strcmp(listefilename,<span class="string">'Contents.m'</span>));
0087 
0088 <span class="comment">% color of upper and lower table (new v1.20)</span>
0089 <span class="keyword">if</span> any(strncmpi(varargin,<span class="string">'color'</span>,3)),
0090     colortable = varargin{1+find(strncmpi(varargin,<span class="string">'color'</span>,3),1,<span class="string">'last'</span>)};
0091 <span class="keyword">else</span>
0092     colortable = <span class="string">'#e7ebf7'</span>;
0093 <span class="keyword">end</span>;
0094 
0095 <span class="keyword">for</span> f=1:length(listefilename),
0096     nbrelink=0;
0097     filename=listefilename{f};
0098     [pathstr,name,ext] = fileparts(filename);
0099     <span class="keyword">if</span> ~strcmp(ext,<span class="string">'.m'</span>),
0100         error([filename <span class="string">' is not an M-file.'</span>]);
0101     <span class="keyword">end</span>;
0102     htmlfilename=fullfile(pathstr,[name <span class="string">'.html'</span>]);
0103     fid=fopen(htmlfilename,<span class="string">'w'</span>);
0104     <span class="keyword">if</span> fid==-1
0105         error([<span class="string">'Can''t create '</span> htmlfilename]);
0106     <span class="keyword">end</span>;
0107 
0108     <span class="comment">% title of the html page (new v1.13):</span>
0109     <span class="keyword">if</span> any(strncmpi(varargin,<span class="string">'title'</span>,3)),
0110         titlehtmlpage = varargin{1+find(strncmpi(varargin,<span class="string">'title'</span>,3),1,<span class="string">'last'</span>)};
0111     <span class="keyword">else</span>
0112         titlehtmlpage = <span class="string">'\f'</span>;
0113     <span class="keyword">end</span>;
0114     titlehtmlpage = strrep(titlehtmlpage,<span class="string">'\f'</span>,name);
0115     
0116     <span class="comment">% head of the html page:</span>
0117     fprintf(fid,<span class="string">'%s\n'</span>,[<span class="string">'&lt;html&gt;&lt;head&gt;&lt;title&gt;'</span> titlehtmlpage <span class="string">'&lt;/title&gt;'</span>]);
0118     fprintf(fid,<span class="string">'%s\n'</span>,[<span class="string">'&lt;!-- Help file for '</span> name <span class="string">'.m generated by makehtmldoc 1.22, '</span> datestr(now) <span class="string">' --&gt;'</span>]);
0119     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;!-- makehtmldoc (F. Moisy, 2005-2006), see http://www.fast.u-psud.fr/~moisy/ml/ --&gt;'</span>);
0120     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">' '</span>);
0121     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;link rel=stylesheet href=&quot;docstyle1.css&quot; type=&quot;text/css&quot;&gt;'</span>);
0122     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;/head&gt;'</span>);
0123     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;body bgcolor=#ffffff&gt;'</span>);
0124 
0125     <span class="comment">% upper table: links to the code source (if option 'code') and to the</span>
0126     <span class="comment">% Contents file (if present), except for the Contents.m file itself:</span>
0127     <span class="keyword">if</span> ~strcmpi(name,<span class="string">'contents'</span>),
0128         headfline=<span class="string">'&lt;table width=&quot;100%&quot; border=0 cellpadding=0 cellspacing=0&gt;&lt;tr&gt;'</span>;
0129         tailfline=<span class="string">'&lt;/tr&gt;&lt;/table&gt;'</span>;
0130         <span class="keyword">if</span> iscontents
0131             firstlinetext=<span class="string">'&lt;a href=&quot;Contents.html&quot;&gt;Contents&lt;/a&gt;'</span>;
0132             <span class="keyword">if</span> any(strncmpi(varargin,<span class="string">'firstline'</span>,4))
0133                 firstlinetext = varargin{1+find(strncmpi(varargin,<span class="string">'firstline'</span>,4),1,<span class="string">'last'</span>)};
0134                 firstlinetext = strrep(firstlinetext,<span class="string">'\f'</span>,name);
0135             <span class="keyword">end</span>;
0136         <span class="keyword">else</span>
0137             firstlinetext=name;
0138         <span class="keyword">end</span>
0139         fline1=[<span class="string">'&lt;td valign=baseline bgcolor=&quot;'</span> colortable <span class="string">'&quot;&gt;&lt;b&gt;'</span> firstlinetext <span class="string">'&lt;/b&gt;&lt;/td&gt;'</span>];
0140 
0141         <span class="keyword">if</span> any(strncmpi(varargin,<span class="string">'code'</span>,3))
0142             fline2=[<span class="string">'&lt;td valign=baseline bgcolor=&quot;'</span> colortable <span class="string">'&quot; align=center&gt;&amp;nbsp;&lt;a href=&quot;matlab:open '''</span> name <span class="string">'.m''&quot;&gt;&lt;b&gt;View code&lt;/b&gt;&lt;/a&gt;&lt;/td&gt;'</span>];
0143         <span class="keyword">else</span>
0144             fline2=<span class="string">''</span>;
0145         <span class="keyword">end</span>;
0146         
0147         <span class="keyword">if</span> length(listefilename)&gt;1,
0148             fline3=[<span class="string">'&lt;td valign=baseline bgcolor=&quot;'</span> colortable <span class="string">'&quot; align=right&gt;'</span>];
0149             <span class="keyword">if</span> f&gt;1,
0150                 [pathstr prevfname ext]=fileparts(listefilename{f-1});
0151                 fline3=[fline3 <span class="string">'&lt;a href=&quot;'</span> prevfname <span class="string">'.html&quot;&gt;&lt;b&gt;&amp;lt;&amp;lt; Prev&lt;/b&gt;&lt;/a&gt;&amp;nbsp;'</span>];
0152             <span class="keyword">else</span>
0153                 fline3=[fline3 <span class="string">'&lt;b&gt;&amp;lt;&lt;/b&gt;&amp;nbsp;'</span>];
0154             <span class="keyword">end</span>;
0155             <span class="keyword">if</span> f&lt;length(listefilename),
0156                 [pathstr nextfname ext]=fileparts(listefilename{f+1});
0157                 fline3=[fline3 <span class="string">'|&amp;nbsp;&lt;a href=&quot;'</span> nextfname <span class="string">'.html&quot;&gt;&lt;b&gt;Next &amp;gt;&amp;gt;&lt;/b&gt;&lt;/a&gt;&amp;nbsp;'</span>];
0158             <span class="keyword">else</span>
0159                 fline3=[fline3 <span class="string">'|&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;'</span>];
0160             <span class="keyword">end</span>;
0161             fline3=[fline3 <span class="string">'&lt;/td&gt;'</span>];
0162         <span class="keyword">else</span>
0163             fline3=<span class="string">''</span>;
0164         <span class="keyword">end</span>;
0165         fprintf(fid,<span class="string">'%s\n'</span>,[headfline fline1 fline2 fline3 tailfline]);
0166     <span class="keyword">end</span>;
0167 
0168     helptext=help(filename);
0169 
0170     <span class="comment">% suppress the 'overloaded ...' part (for Contents.m file)</span>
0171     pover=strfind(helptext,<span class="string">'Overloaded'</span>);
0172     <span class="keyword">if</span> length(pover),
0173         helptext=[helptext(1:(pover-1)) char(10)];
0174     <span class="keyword">end</span>;
0175 
0176     <span class="comment">% number of initial spaces to jump at each line</span>
0177     <span class="comment">% (this value may be overestimated):</span>
0178     firstchar=6;
0179 
0180     remhelptext=helptext; <span class="comment">% initialize the remainder of the help text</span>
0181     firstline = true;
0182     <span class="keyword">while</span> length(remhelptext),
0183         <span class="comment">%extracts the first line of the remainder of the help text:</span>
0184         pnextenter=strfind(remhelptext,10); pnextenter=pnextenter(1);
0185         curline=remhelptext(1:(pnextenter-1)); <span class="comment">% current line</span>
0186 
0187         <span class="comment">% removes the &lt; and &gt; signs (confusion with html syntax):</span>
0188         curline=strrep(curline,<span class="string">'&lt;'</span>,<span class="string">'&amp;lt;'</span>);
0189         curline=strrep(curline,<span class="string">'&gt;'</span>,<span class="string">'&amp;gt;'</span>);
0190 
0191         <span class="keyword">if</span> firstline, <span class="comment">% the first line of the help text is the name of the function</span>
0192             <span class="keyword">if</span> ~strcmpi(name,<span class="string">'contents'</span>),
0193                 fprintf(fid,<span class="string">'%s\n'</span>,[<span class="string">'&lt;font size=+3 color=&quot;#990000&quot;&gt;'</span> lower(name) <span class="string">'&lt;/font&gt;&lt;br&gt;'</span>]);
0194                 [token,remline]=strtok(curline);
0195                 fprintf(fid,<span class="string">'%s\n'</span>,[strtrim(remline) <span class="string">'&lt;br&gt;'</span>]);
0196             <span class="keyword">else</span>
0197                 fprintf(fid,<span class="string">'%s\n'</span>,[<span class="string">'&lt;font size=+3 color=&quot;#990000&quot;&gt;'</span> curline <span class="string">'&lt;/font&gt;&lt;br&gt;'</span>]);
0198             <span class="keyword">end</span>;
0199             fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;br&gt;'</span>);
0200             fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">' '</span>);
0201             <span class="keyword">if</span> ~strcmpi(name,<span class="string">'contents'</span>),
0202                 fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;font size=+1 color=&quot;#990000&quot;&gt;&lt;b&gt;Description&lt;/b&gt;&lt;/font&gt;'</span>);
0203             <span class="keyword">end</span>;
0204             fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;code&gt;&lt;pre&gt;'</span>);
0205             firstline = false;
0206         <span class="keyword">else</span>
0207             <span class="comment">% removes the first white spaces:</span>
0208             curline=[curline <span class="string">'           '</span>];
0209             <span class="keyword">while</span> ~isequal(curline(firstchar-1),<span class="string">' '</span>),
0210                 firstchar=firstchar-1; <span class="comment">%</span>
0211             <span class="keyword">end</span>;
0212             curline=deblank(curline(firstchar:end));
0213 
0214             <span class="comment">% detects the 'See Also' section  (v1.01)</span>
0215             pseealso=strfind(lower(curline),<span class="string">'see also'</span>);
0216             <span class="keyword">if</span> ((length(pseealso))&amp;&amp;(length(curline)&gt;2)),
0217                 pseealso=pseealso(1);
0218                 fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;/pre&gt;'</span>);
0219                 fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;font size=+1 color=&quot;#990000&quot;&gt;&lt;b&gt;See Also&lt;/b&gt;&lt;/font&gt;'</span>);
0220                 fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;pre&gt;'</span>);
0221                 curline=curline((pseealso+9):end);
0222                 seealsotoken=strtok(curline);
0223                 pp=strfind(curline,seealsotoken); pp=pp(1); <span class="comment">% position of the first character of the &quot;see also&quot; words</span>
0224                 curline=curline(pp:end);
0225             <span class="keyword">end</span>;
0226             
0227             <span class="comment">% detects the 'Examples' line (v1.22)</span>
0228             <span class="keyword">if</span> length(curline)&gt;=7,
0229                 pexample=strfind(lower(curline(1:7)),<span class="string">'example'</span>);
0230                 <span class="keyword">if</span> length(pexample)
0231                     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;/pre&gt;'</span>);
0232                     <span class="keyword">if</span> (strncmpi(curline,<span class="string">'examples'</span>,8))
0233                         fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;font size=+1 color=&quot;#990000&quot;&gt;&lt;b&gt;Examples&lt;/b&gt;&lt;/font&gt;'</span>);
0234                     <span class="keyword">else</span>
0235                         fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;font size=+1 color=&quot;#990000&quot;&gt;&lt;b&gt;Example&lt;/b&gt;&lt;/font&gt;'</span>);
0236                     <span class="keyword">end</span>;
0237                     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;pre&gt;'</span>);
0238                     curline=curline(8:end);
0239                     psc=findstr(curline,<span class="string">':'</span>);
0240                     <span class="keyword">if</span> length(psc)
0241                         curline=curline((psc(1)+1):end);
0242                     <span class="keyword">end</span>;
0243                 <span class="keyword">end</span>;
0244             <span class="keyword">end</span>;
0245             
0246             remline=curline; <span class="comment">% remainder of the current line</span>
0247 
0248             <span class="keyword">while</span> length(remline),
0249                 [token, newremline] = strtok(remline,<span class="string">' ,.;:!?()[]{}&quot;''=+-*/'</span>); <span class="comment">% next word</span>
0250                 <span class="keyword">if</span> length(token)
0251                     pnextword=strfind(remline,token); pnextword=pnextword(1); <span class="comment">% position of the next word</span>
0252                     fprintf(fid,<span class="string">'%s'</span>,remline(1:(pnextword-1))); <span class="comment">% writes the characters before % changed v1.06</span>
0253                     makelink=0;
0254                     <span class="keyword">if</span> strcmpi(token,name)
0255                         makelink=-1; <span class="comment">% if the word is the filename itself, displays it in bold</span>
0256                     <span class="keyword">else</span>
0257                         <span class="keyword">if</span> logical(sum(ismember(listefilename,lower([token <span class="string">'.m'</span>])))),
0258                             <span class="keyword">if</span> any(strncmpi(varargin,<span class="string">'upper'</span>,1))
0259                                 makelink=strcmp(token,upper(token)); <span class="comment">% makes a link only if the word is in upper case</span>
0260                             <span class="keyword">else</span>
0261                                 makelink=1;
0262                             <span class="keyword">end</span>;
0263                         <span class="keyword">end</span>;
0264                     <span class="keyword">end</span>;
0265                     <span class="keyword">if</span> makelink==1
0266                         fprintf(fid,<span class="string">'%s'</span>,[<span class="string">'&lt;a href=&quot;'</span> lower(token) <span class="string">'.html&quot;&gt;'</span> lower(token) <span class="string">'&lt;/a&gt;'</span>]);
0267                         nbrelink=nbrelink+1;
0268                     <span class="keyword">elseif</span> makelink==-1,
0269                         fprintf(fid,<span class="string">'%s'</span>,[<span class="string">'&lt;b&gt;'</span> lower(token) <span class="string">'&lt;/b&gt;'</span>]);
0270                     <span class="keyword">else</span>
0271                         fprintf(fid,<span class="string">'%s'</span>,token);   <span class="comment">% no link for this word</span>
0272                     <span class="keyword">end</span>;
0273                 <span class="keyword">else</span>  <span class="comment">% if no word found until the end of the line, simply writes the end of the line:</span>
0274                     fprintf(fid,<span class="string">'%s'</span>,remline);
0275                 <span class="keyword">end</span>;
0276                 remline=newremline;
0277             <span class="keyword">end</span>;
0278             fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">' '</span>); <span class="comment">% end of the line</span>
0279         <span class="keyword">end</span>;
0280         remhelptext=remhelptext((pnextenter+1):end); <span class="comment">% new remainder</span>
0281     <span class="keyword">end</span>;
0282     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;/pre&gt;&lt;/code&gt;'</span>);  <span class="comment">% end of &quot;code&quot; section</span>
0283 
0284     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">' '</span>);
0285 
0286     <span class="comment">% lower table (links to the previous and next filenames):</span>
0287     <span class="keyword">if</span> ~strcmpi(name,<span class="string">'contents'</span>),
0288         <span class="keyword">if</span> length(listefilename)&gt;1,
0289             headfline=[<span class="string">'&lt;table width=&quot;100%&quot; border=0 cellspacing=0 bgcolor=&quot;'</span> colortable <span class="string">'&quot;&gt;&lt;tr&gt;'</span>];
0290             tailfline=<span class="string">'&lt;/tr&gt;&lt;/table&gt;&lt;br&gt;'</span>;
0291             <span class="keyword">if</span> f==1,
0292                 fline1=<span class="string">'&lt;td&gt;&amp;nbsp;&lt;/td&gt;'</span>;
0293             <span class="keyword">else</span>
0294                 [pathstr prevfname ext]=fileparts(listefilename{f-1});
0295                 fline1=[<span class="string">'&lt;td&gt;&amp;nbsp;&lt;a href=&quot;'</span> prevfname <span class="string">'.html&quot;&gt;&lt;b&gt;Previous: '</span> prevfname <span class="string">'&lt;/b&gt;&lt;/a&gt;&lt;/td&gt;'</span>];
0296             <span class="keyword">end</span>;
0297             <span class="keyword">if</span> f==length(listefilename),
0298                 fline2=<span class="string">'&lt;td align=right&gt;&amp;nbsp;&lt;/td&gt;'</span>;
0299             <span class="keyword">else</span>
0300                 [pathstr nextfname ext]=fileparts(listefilename{f+1});
0301                 fline2=[<span class="string">'&lt;td align=right&gt;&lt;a href=&quot;'</span> nextfname <span class="string">'.html&quot;&gt;&lt;b&gt;Next: '</span> nextfname <span class="string">'&lt;/b&gt;&lt;/a&gt;&amp;nbsp;&lt;/td&gt;'</span>];
0302             <span class="keyword">end</span>;
0303             fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;br&gt;'</span>);
0304             fprintf(fid,<span class="string">'%s\n'</span>,[headfline fline1 fline2 tailfline]);
0305         <span class="keyword">end</span>;
0306     <span class="keyword">end</span>;
0307 
0308     <span class="comment">% foot of the html page:</span>
0309     <span class="keyword">if</span> any(strncmpi(varargin,<span class="string">'lastline'</span>,4)),
0310         lastline = varargin{1+find(strncmpi(varargin,<span class="string">'lastline'</span>,4),1,<span class="string">'last'</span>)};
0311         lastline = strrep(lastline,<span class="string">'\f'</span>,name);
0312         fprintf(fid,<span class="string">'%s\n'</span>,[lastline <span class="string">'&lt;br&gt;'</span>]);
0313     <span class="keyword">end</span>;
0314     
0315     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;br&gt;'</span>);
0316     <span class="keyword">if</span> ~any(strncmpi(varargin,<span class="string">'noadver'</span>,4)),  <span class="comment">% hidden option: 'noad'</span>
0317         fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;font size=-1&gt;Help file generated by &lt;a href=&quot;http://www.fast.u-psud.fr/~moisy/ml&quot; target=&quot;_blank&quot;&gt;makehtmldoc 1.22&lt;/a&gt;&lt;/font&gt;&lt;br&gt;'</span>);
0318     <span class="keyword">end</span>;
0319     fprintf(fid,<span class="string">'%s\n'</span>,<span class="string">'&lt;/body&gt;&lt;/html&gt;'</span>);
0320     fclose(fid);
0321 
0322     <span class="comment">% new v1.02</span>
0323     <span class="keyword">if</span> ~any(strncmpi(varargin,<span class="string">'quiet'</span>,1)),
0324         disp([name <span class="string">'.m --&gt; '</span> name <span class="string">'.html  ['</span> num2str(nbrelink) <span class="string">' links]'</span>]);
0325     <span class="keyword">end</span>;
0326 <span class="keyword">end</span>;</pre></div>
<hr><address>Generated on Wed 07-Oct-2020 17:13:47 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>